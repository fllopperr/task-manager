enum Priority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

model Task {
  id          String  @id @default(cuid())
  title       String  @db.VarChar(255)
  description String?
  position    Decimal @default(0) @db.Decimal(10, 4)

  priority  Priority? @default(MEDIUM)
  tags      String[]
  limitDate DateTime? @map("limit_date")

  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  ownerId String @map("owner_id")
  owner   User   @relation("UserOwnedTasks", fields: [ownerId], references: [id], onDelete: Cascade)

  assigneeId String? @map("assignee_id")
  assignee   User?   @relation("UserAssignedTasks", fields: [assigneeId], references: [id], onDelete: SetNull)

  columnId String @map("column_id")
  column   Column @relation(fields: [columnId], references: [id], onDelete: Cascade)

  comments Comment[]

  @@unique([columnId, position])
  @@index([ownerId])
  @@index([assigneeId])
  @@index([columnId])
  @@map("tasks")
}
